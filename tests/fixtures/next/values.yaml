$gryml-values-before:
  - base_values.yaml

chart:
  app: grafana
  name: grafana
  labels:
    app: chart-app #{chart.app}
    chart: chart-name #{chart.name}
    release: 1 #{release.name}
    heritage: "service" #{release.service}
    baseValue1: "" #{baseValues.test1} // Should be "one"
  annotations:
    annotation: "12332"

valueTests:
  val1: 1
  val2: 0 #{valueTests.val1 + 1} // should be 2
  val3: 0 #{valueTests.val2 + 1} // should be 1 (we apply things to the initial value)

grafana:
  serviceAccountName: test
  namespace: grafana

release:
  version: 1
  name: 1 #{semstamp(release.version)}
  service: gryml

rbac:
  create: true
  namespaced: false
  extraClusterRoleRules: []
  pspEnabled: true

sidecar:
  dashboards: true
  datasources: false

dashboards:
  provider: dashboard

persistence:
  enabled: true
  type: pvc
  annotations: {}
  finalizers: {}
  accessModes: []
  size: 1Gi
  storageClassName: "default"

# TODO: consider
#$gryml-after: and $gryml-before
#  - include: parts/cluster-role

podAnnotations: {}

ingress:
  enabled: true

podDisruptionBudget:
  minAvailable: 3
  maxUnavailable: 2

settings:
  - name: one
    value: 1
  - name: two
    value: 2
  - name: three
    value: 3

admin:
  existingSecret: ""

envRenderSecret:
  key: value

$gryml-values-after:
  - some_more_values.yaml

$gryml-sources:
  - clusterrole.yaml            #[if rbac.create and not rbac.namespaced]
  - clusterrolebinding.yaml     #[if rbac.create and not rbac.namespaced]
